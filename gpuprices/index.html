<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GPU Prices</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid #dddddd;
            text-align: left;
            padding: 8px;
        }
        th {
            cursor: pointer;
        }
        .asc::after {
            content: " \25B2"; /* Triangolino verso l'alto */
        }
        .desc::after {
            content: " \25BC"; /* Triangolino verso il basso */
        }
    </style>
</head>
<body>

<h1>GPU Hosting Prices</h1>
<p>by <a href="/">llamabox.eu</a></p>
<br>
<hr>

<table id="gpuTable">
    <thead>
        <tr>
            <th onclick="sortTable(0)">GPU</th>
            <th onclick="sortTable(1)">Hourly Price (USD)</th>
            <th onclick="sortTable(2)">VRAM (GB)</th>
            <th>Provider</th>
            <th>Link</th>
        </tr>
    </thead>
    <tbody>
    </tbody>
</table>

<script>
async function loadJSON(url) {
    const response = await fetch(url);
    return await response.json();
}

function buildTable(data) {
    const tableBody = document.querySelector('#gpuTable tbody');
    tableBody.innerHTML = '';
    data.forEach(item => {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${item.GPU}</td>
            <td>${item["hourly-price"]}</td>
            <td>${item.VRAM}</td>
            <td>${item.provider}</td>
            <td><a href="${item.link}" target="_blank">Link</a></td>
        `;
        tableBody.appendChild(row);
    });
}

function sortTable(columnIndex) {
    const table = document.querySelector('#gpuTable tbody');
    const rows = Array.from(table.rows);
    const header = document.querySelectorAll('th')[columnIndex];
    const isAscending = header.classList.contains('asc');
    
    rows.sort((a, b) => {
        const cellA = a.cells[columnIndex].textContent;
        const cellB = b.cells[columnIndex].textContent;
        
        if (!isNaN(cellA) && !isNaN(cellB)) {
            return isAscending ? cellA - cellB : cellB - cellA;
        }
        
        return isAscending ? cellA.localeCompare(cellB) : cellB.localeCompare(cellA);
    });
    
    rows.forEach(row => table.appendChild(row));
    document.querySelectorAll('th').forEach(th => th.classList.remove('asc', 'desc'));
    header.classList.toggle('asc', !isAscending);
    header.classList.toggle('desc', isAscending);
}

document.addEventListener('DOMContentLoaded', async () => {
    const data = await loadJSON('prices.js');
    buildTable(data);
});
</script>

</body>
</html>
